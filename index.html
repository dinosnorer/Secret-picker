<!DOCTYPE html>
<html>
<head>
    <title>Secret Button Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 80px;
        }
        input {
            font-size: 18px;
            width: 60px;
            text-align: center;
        }
        button {
            font-size: 24px;
            padding: 15px 30px;
            cursor: pointer;
            margin: 10px;
        }
        #result {
            margin-top: 50px;
            font-size: 48px;
            font-weight: bold;
            transition: color 0.3s;
        }
        .good {
            color: green;
        }
        .bad {
            color: red;
        }
        #note {
            font-size: 18px;
            color: #555;
            margin-top: 10px;
        }
        .flip {
            animation: flip 1.2s ease-in-out;
        }
        @keyframes flip {
            0%   { transform: rotateY(0); }
            25%  { transform: rotateY(180deg); }
            50%  { transform: rotateY(360deg); }
            75%  { transform: rotateY(540deg); }
            100% { transform: rotateY(720deg); }
        }
        .disabled {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Secret Button Game</h1>
    <div>
        <label for="numGood">Number of Good:</label>
        <input type="number" id="numGood" value="5" min="1">
    </div>
    <div style="margin-top:10px;">
        <label for="numBad">Number of Bad:</label>
        <input type="number" id="numBad" value="1" min="1">
    </div>
    <div style="margin-top:20px;">
        <button onclick="pressButton()" id="playBtn">Click Me</button>
        <button onclick="resetGame()">Reset</button>
    </div>

    <div id="result"></div>
    <div id="note"></div>

    <script>
        let gameStarted = false;
        let outcomePool = [];
        let badGiven = false;
        let forceGoodNextClick = false;

        function pressButton() {
            const numGood = parseInt(document.getElementById('numGood').value) || 5;
            const numBad = parseInt(document.getElementById('numBad').value) || 1;
            const resultDiv = document.getElementById('result');
            const noteDiv = document.getElementById('note');
            const playBtn = document.getElementById('playBtn');

            if (!gameStarted) {
                gameStarted = true;
                document.getElementById('numGood').disabled = true;
                document.getElementById('numBad').disabled = true;

                // Create pool based on inputs
                // If bad has not been given, add bad outcomes; otherwise, only good
                outcomePool = Array(numGood).fill("Good");
                if (!badGiven) {
                    outcomePool = outcomePool.concat(Array(numBad).fill("Bad"));
                }
                outcomePool = outcomePool.sort(() => Math.random() - 0.5);
            }

            if (outcomePool.length === 0) {
                resultDiv.innerText = "No more outcomes!";
                resultDiv.className = "";
                noteDiv.innerText = "Reset to play again.";
                playBtn.disabled = true;
                playBtn.classList.add('disabled');
                return;
            }

            // Start flip animation
            resultDiv.innerText = '';
            resultDiv.className = 'flip';
            playBtn.disabled = true;
            playBtn.classList.add('disabled');

            setTimeout(() => {
                let result;

                if (forceGoodNextClick) {
                    // Guarantee Good outcome this click after Bad
                    result = "Good";
                    forceGoodNextClick = false;
                } else {
                    // Pop a random outcome from pool
                    const randomIndex = Math.floor(Math.random() * outcomePool.length);
                    result = outcomePool.splice(randomIndex, 1)[0];
                }

                if (result === "Bad") {
                    badGiven = true;
                    forceGoodNextClick = true;
                    resultDiv.innerText = "Bad";
                    resultDiv.className = "bad";
                    noteDiv.innerText = "(Click again if you get Bad)";
                } else {
                    resultDiv.innerText = "Good";
                    resultDiv.className = "good";
                    noteDiv.innerText = "";
                }

                // If no more outcomes, disable button
                if (outcomePool.length === 0 && !forceGoodNextClick) {
                    playBtn.disabled = true;
                    playBtn.classList.add('disabled');
                    noteDiv.innerText += " No more outcomes!";
                } else {
                    playBtn.disabled = false;
                    playBtn.classList.remove('disabled');
                }

            }, 1200); // animation duration
        }

        function resetGame() {
            gameStarted = false;
            outcomePool = [];
            badGiven = false;
            forceGoodNextClick = false;

            document.getElementById('result').innerText = '';
            document.getElementById('result').className = '';
            document.getElementById('note').innerText = '';

            document.getElementById('numGood').disabled = false;
            document.getElementById('numBad').disabled = false;

            const playBtn = document.getElementById('playBtn');
            playBtn.disabled = false;
            playBtn.classList.remove('disabled');
        }
    </script>
</body>
</html>
